// Generated by CoffeeScript 1.3.3
(function() {
  var PgnParser;

  PgnParser = (function() {
    var OPERATOR;

    OPERATOR = /(([NBRQK])?([a-h]?[1-8]?)?x?([a-h][1-8])(=[NBRQK])?([+#])?)\-([NBRQK])?([a-h]?[1-8]?)?x?([a-h][1-8])(=[NBRQK])?([+#])?/g;

    function PgnParser(file) {
      this.file = file;
      this.moves = [];
    }

    PgnParser.prototype.parse = function() {
      var moves,
        _this = this;
      moves = this.file.match(OPERATOR);
      return _.each(moves, function(move) {
        var check, from, mate, to, _ref;
        _ref = move.split('-'), from = _ref[0], to = _ref[1];
        check = false;
        if (to.match(/\+/)) {
          check = true;
          to = to.replace('+', '');
        }
        mate = false;
        if (to.match(/\#/)) {
          mate = true;
          to = to.replace('#', '');
        }
        return _this.moves.push({
          from: from,
          to: to,
          check: check,
          mate: mate
        });
      });
    };

    return PgnParser;

  })();

  window.PgnParser = PgnParser;

}).call(this);
